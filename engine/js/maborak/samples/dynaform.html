<html>
	<head>
	<title>Dynaform builder</title>
<script type="text/javascript" src="../core/maborak.js"></script>
<script type="text/javascript">
	var leimnud = new maborak();
	leimnud.make({
        //zip:true,
		modules	:"dom,abbr,rpc,drag,drop,app,panel,fx,grid,dynaform,xmlform",
		files	:"json"
	});
</script>
<link rel="stylesheet" type="text/css" href="../core/stylesheet/tiny.css" />
<style>
.dbs{
margin-right:2px;
border:1px solid transparent;
font:normal 9px Tahoma,sans-serif;
height:20px;
}
.dbo{
margin-right:2px;
border:1px solid #0A246A;
background-color:#C2CBE0;
font:normal 9px Tahoma,sans-serif;
height:20px;
}
.dss{
margin-right:2px;
border:1px solid #0A246A;
background-color:#C2CBE0;
font:normal 8pt Tahoma,sans-serif;
height:20px;
}
td{
vertical-align:top;
}
</style>
<script type="text/javascript">
var dyna;
leimnud.event.add(window,"load",function(){
        $(document.body).setStyle({backgroundColor:"#efefef",overflow:'hidden'});
        window['b']=$(document.body).setStyle({backgroundColor:"white"});
		window['w']={
			pi:(b.clientHeight-27),
			pv:(30*b.clientHeight)/100,
			psv:(70*b.clientHeight)/100
		};
        var c = $('cont');
        window['p'] = new leimnud.module.panel();
        p.options={
			size:{w:(70*document.body.clientWidth)/100,h:(w.pi-10)},
            position:{x:2,y:2},
			fx:{blinkToFront:false,shadow:false},
            control:{move:false,close:false,drag:false}
        };
		p.setStyle.frontend={
			backgroundColor:'#ECECEC'
		};
		p.setStyle.content = {
			borderWidth:0,
			backgroundColor:'transparent'
		};
		p.make();
		
		window['s'] = new leimnud.module.panel();
		s.options={
			size:{w:((30*document.body.clientWidth)/100)-15,h:(w.pi-10)},
			title	:"Grid",
			titleBar:false,
			statusBar:false,
			position:{x:((70*document.body.clientWidth)/100)+7,y:2},
			fx:{blinkToFront:false},
			control:{drag:false,close:false}
		};
		s.setStyle={
			content:{padding:2,borderTopWidth:1}
		};
		s.make();
			
		window['e'] = new leimnud.module.panel();
        e.options={
			size:{w:(document.body.clientWidth)+1,h:w.psv},
            position:{x:-1,y:w.pi},
			fx:{shadow:false,move:false},
            control:{move:false,close:false,drag:false},
            strict_position:false
        };
		// p.setStyle.titleBar={background:'transparent'};
		e.setStyle.containerWindow={
			border:"1px solid #ccc"
		};
		e.setStyle.frontend={
			backgroundColor:'#ECECEC'
		};
		e.setStyle.frontend={
			backgroundColor:'white'
		};
		e.setStyle.titleBar={
			background:'#F0F0EE',
			borderBottom:'1px solid #ccc',
			textAlign:"right",
			height:27,
			paddingRight:5
		};
		e.setStyle.content = {
			borderWidth:0,
			backgroundColor:'white'
		};
		e.setStyle.title={
			textAlign:"right",
			padding:0
		};
		e.make();
		var _ed;
		e.addContent(
			_ed = new DOM('textarea',{},{
				width :"100%",
				height:"98%"
			})
		);
		
		var _ba,_bb,_bc;
		$(e.elements.title).append(
			new DOM('span',{className:"mceEditor defaultSkin"}).append(
				new DOM('table').append(
					new DOM('tbody').append(new DOM('tr').append(
							new DOM('td').append(
								new DOM('a',{className:"mceButton mceButtonEnabled mce_newdocument"}).append(
									new DOM('span',{className:"mceIcon mce_newdocument"})
								)
							),
							new DOM('td').append(
								new DOM('span',{className:"mceSeparator"})
							),
							new DOM('td').append(
								_ba = new DOM('a',{className:"mceButton mceButtonEnabled mce_save"}).append(
									new DOM('span',{className:"mceIcon mce_save"})
								)
							),
							new DOM('td').append(
								_ba = new DOM('a',{className:"mceButton mceButtonDisabled mce_undo"}).append(
									new DOM('span',{className:"mceIcon mce_undo"})
								)
							),
							new DOM('td').append(
								_ba = new DOM('a',{className:"mceButton mceButtonDisabled mce_redo"}).append(
									new DOM('span',{className:"mceIcon mce_redo"})
								)
							),							
							new DOM('td').append(
								new DOM('span',{className:"mceSeparator"})
							),
							new DOM('td').append(
								_bb = new DOM('input',{type:'button',value:"XML",className:"dbs",onmouseover:function(){this.className='dbo'},onmouseout:function(){this.className=(this.dv=='1')?'dbo':'dbs';}})
							),
							new DOM('td').append(
								_bc = new DOM('input',{type:'button',value:"TEMPLATE",className:"dbs",onmouseover:function(){this.className='dbo'},onmouseout:function(){this.className=(this.dv=='1')?'dbo':'dbs';}})
							)
						)
					)
				)
			)
		);
		
		dyna = new leimnud.module.dynaform().make({
			target		:$(p.elements.content),
			target_info	:$(s.elements.content),
			template	:'empty.tpl',
			xmlform		:'empty.xml',
			debug		:true,
			buttons:	{
				save:_ba,
				xml:_bb,
				template:_bc
			},
			window:{
				gui:window['p'],
				properties:window['s'],
				editor:window['e'],
				textarea:_ed
			},
			sizes:window['w']
		});	
		//#F0F0EE   ccc
});
</script>
	
	</head>
<body></body>
</html>
