<?xml version="1.0" encoding="UTF-8"?>
<dynaForm name="currency" type="xmlform" width="100%" enableTemplate="1">
  <PME_A type="hidden"/>
  <PME_TYPE type="hidden"/>
  <PME_PRO_UID type="hidden"/>
  <PME_DYN_TYPE type="phpvariable"/>
  <PME_TITLE type="title" enableHTML="1">
    <en>Properties</en>
    <pt><![CDATA[Propriedades]]></pt>
  </PME_TITLE>
  <PME_XMLNODE_NAME type="text" size="32" maxlength="64" validate="NodeName" dependentFields="PME_VALIDATE_NAME" required="1">
    <en>Field Name</en>
    <pt><![CDATA[Nome do campo]]></pt>
  </PME_XMLNODE_NAME>
  <PME_XMLNODE_NAME_OLD type="hidden"/>
  <PME_VALIDATE_NAME type="hidden" sqlConnection="XMLDB">
SELECT XMLNODE_NAME, TYPE FROM dynaForm WHERE XMLNODE_NAME = @@PME_XMLNODE_NAME
</PME_VALIDATE_NAME>
  <PME_LABEL type="text" maxlength="255" size="50">
    <en>Label</en>
    <pt><![CDATA[Rótulo]]></pt>
  </PME_LABEL>
  <PME_SUBTITLE3 type="title" enableHTML="1">
    <en>Behaviour</en>
    <pt><![CDATA[Comportamento]]></pt>
  </PME_SUBTITLE3>
  <!--
<PME_MAXLENGTH type="text" maxlength="10" size="10" validate="Int" defaultvalue="15">
  <en>Max. Length</en>
</PME_MAXLENGTH>
-->
  <PME_CURRENCY type="hidden" maxlength="50" size="30" defaultvalue="$">
    <en>Currency</en>
    <pt><![CDATA[Moeda]]></pt>
  </PME_CURRENCY>
  <PME_VALIDATE type="dropdown" defaultvalue="Real">
    <en>Validate<option name="Int">Integer</option><option name="Real">Real Number</option></en>
    <pt><![CDATA[Validade]]><option name="Int"><![CDATA[Inteiro]]></option><option name="Real"><![CDATA[Real]]></option></pt>
  </PME_VALIDATE>
  <PME_COMMA_SEPARATOR type="dropdown" defaultvalue=".">
    <en>Decimal Separator<option name=".">Period [.]</option><option name=",">Comma [,]</option></en>
  </PME_COMMA_SEPARATOR>
  <PME_MASK type="text" maxlength="50" size="50" defaultvalue="###,###,###,###.##">
    <en>Mask</en>
    <pt><![CDATA[Máscara]]></pt>
  </PME_MASK>
  <PME_REQUIRED type="checkbox" falseValue="0" value="1" defaultvalue="0" labelOnRight="0">
    <en>Required</en>
    <pt><![CDATA[Obrigatório]]></pt>
  </PME_REQUIRED>
  <PME_READONLY type="checkbox" falseValue="0" value="1" defaultvalue="0" labelOnRight="0">
    <en>Read Only</en>
    <pt><![CDATA[Somente leitura]]></pt>
  </PME_READONLY>
  <PME_DEFAULTVALUE type="text" maxlength="50" size="30" defaultvalue="">
    <en>Default Value</en>
    <pt><![CDATA[Valor padrão]]></pt>
  </PME_DEFAULTVALUE>
  <PME_HINT type="textarea" cols="47" rows="3">
    <en>Hint</en>
    <pt><![CDATA[Hint]]></pt>
  </PME_HINT>
  <PME_SUBTITLE type="title" enableHTML="1">
    <en>Appearance</en>
    <pt><![CDATA[Aparência]]></pt>
  </PME_SUBTITLE>
  <PME_SIZE type="text" maxlength="10" size="10" validate="Int" defaultvalue="15">
    <en>Size</en>
    <pt><![CDATA[Tamanho]]></pt>
  </PME_SIZE>
  <PME_MODE type="dropdown" defaultvalue="edit">
    <en>Mode<option name="edit">Edit</option><option name="view">View</option></en>
    <pt><![CDATA[Modo]]><option name="edit"><![CDATA[Editar]]></option><option name="view"><![CDATA[Visualizar]]></option></pt>
  </PME_MODE>
  <PME_SUBTITLE_OP type="title" enableHTML="1">
    <en>Operations</en>
    <pt><![CDATA[Operations]]></pt>
  </PME_SUBTITLE_OP>
  <PME_FORMULA type="text" maxlength="50" size="30" defaultvalue="">
    <en>Formula</en>
    <pt><![CDATA[Formula]]></pt>
  </PME_FORMULA>
  <PME_FUNCTION type="dropdown">
    <en>Function<option name="">None</option><option name="sum">SUM</option><option name="avg">AVG</option></en>
    <pt><![CDATA[Function]]><option name=""><![CDATA[None]]></option><option name="sum"><![CDATA[SUM]]></option><option name="avg"><![CDATA[AVG]]></option></pt>
  </PME_FUNCTION>
  <PME_SUBTITLE2 type="title" enableHTML="1">
    <en>Data</en>
    <pt><![CDATA[Dados]]></pt>
  </PME_SUBTITLE2>
  <PME_SQLCONNECTION type="dropdown" sqlconnection="dbarray"><![CDATA[
  SELECT * FROM DB_CONNECTIONS
  ]]><en>Sql Connection<option name="">(none)</option></en><pt><![CDATA[Sql Connection]]><option name=""><![CDATA[(none)]]></option></pt></PME_SQLCONNECTION>
  <PME_XMLNODE_VALUE type="textarea" cols="47" rows="3">
    <en>Sql</en>
    <pt><![CDATA[Sql]]></pt>
  </PME_XMLNODE_VALUE>
  <BTN_CANCEL type="button" onclick="cancel();">
    <en>Cancel</en>
    <pt><![CDATA[Cancel]]></pt>
  </BTN_CANCEL>
  <PME_ACCEPT type="button" onclick="fieldsSave( this.form );">
    <en>Save</en>
    <pt><![CDATA[Salvar]]></pt>
  </PME_ACCEPT>
  <PME_JS type="javascript"><![CDATA[
var fieldForm="currency";
var fieldName=getField("PME_XMLNODE_NAME",fieldForm);
var fieldVal=getField("PME_VALIDATE",fieldForm);
var fieldMask=getField("PME_MASK",fieldForm);
var savedFieldName=fieldName.value;
var pme_validating;
fieldName.focus();
fieldName.select();
leimnud.event.add(fieldName, 'change', {method:verifyFieldName, instance:fieldName, event:true});
leimnud.event.add(fieldVal, 'change', {method:checkVal, instance:fieldVal, event:true});
leimnud.event.add(fieldMask, 'change', {method:checkVal, instance:fieldMask, event:true});
function verifyFieldName(){
  pme_validating=true;
  setTimeout('verifyFieldName1();',0);
  return true;
}
function verifyFieldName1(){
  var newFieldName=fieldName.value;
  var validatedFieldName=getField("PME_VALIDATE_NAME",fieldForm).value;
  var valid=(newFieldName!=='')&&(((newFieldName!==savedFieldName)&&(validatedFieldName===''))||((newFieldName===savedFieldName)));
  if (valid)
    getField("PME_ACCEPT",fieldForm).disabled=false;
  else
    getField("PME_ACCEPT",fieldForm).disabled=true;
  pme_validating=false;
  return valid;
}

var dyntype="@#PME_DYN_TYPE";
if(dyntype != 'grid'){
  //hideRowById('PME_SUBTITLE_OP');
  //hideRowById('PME_FORMULA');
  hideRowById('PME_FUNCTION');
}
      
function cancel(){
    currentPopupWindow.remove();
}

function checkVal(){
  if (fieldVal.value === 'Int'){
    aux = fieldMask.value;
    aux = aux.replace('.000','');
    aux = aux.replace('.00','');
    aux = aux.replace('.0','');
    aux = aux.replace('.##','');
    aux = aux.replace('.#','');
    aux = aux.replace('.','');
    fieldMask.value = aux;
  }
}
             
]]></PME_JS>
  <PME_MAXLENGTH>
    <pt><![CDATA[Tamanho máximo]]></pt>
  </PME_MAXLENGTH>
</dynaForm>
